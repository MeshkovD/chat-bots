# Учебный телеграм-бот


Бот оповещает об окончании проверки работы на учебном сайте devman.org  
При этом используется API сайта: https://dvmn.org/api/docs/

Система состоит из двух частей. 
1. Телеграм-бот, создается по инструкции ниже. 
2. Python-скрипт - требует запуска и указания **chat_id**


## Зарегистрируйте бота в Telegram
Необходимо написать [Отцу ботов](https://telegram.me/BotFather).  

```sh
/start
/newbot
```
Отец ботов попросит ввести два имени.  
Первое — как он будет отображаться в списке контактов, можно написать на русском.   
Второе — имя, по которому бота можно будет найти в поиске. Должно быть английском и заканчиваться на bot (например, notification_bot)
  
В ответ вы получите сообщение API ключ для работы с вашим ботом:
```sh
86432699:wP3db3304vnrob33BZdb33KwP3db3F2Z
```


## Как запустить python-скрипт для работы с ботом

Скачайте код:
```sh
git clone https://github.com/MeshkovD/chat-bots.git
```

Перейдите в каталог проекта:
```sh
cd chat-bots
```

[Установите Python](https://www.python.org/), если этого ещё не сделали.

Проверьте, что `python` установлен и корректно настроен. Запустите его в командной строке:
```sh
python --version
```
**Важно!** Версия Python должна быть не ниже 3.9.

Возможно, вместо команды `python` здесь и в остальных инструкциях этого README придётся использовать `python3`. Зависит это от операционной системы и от того, установлен ли у вас Python старой второй версии.

В каталоге проекта создайте виртуальное окружение:
```sh
python -m venv venv
```
Активируйте его. На разных операционных системах это делается разными командами:

- Windows: `.\venv\Scripts\activate`
- MacOS/Linux: `source venv/bin/activate`


Установите зависимости в виртуальное окружение:
```sh
pip install -r requirements.txt
```

При запуске проекта в продакшн режиме рекомендуется, для хранения чувствительных настроек, воспользоваться переменными окружения. Проект уже настроен на работу с переменными окружения, для их использования в каталоге содержащем settings.py создайте файл .env

Примерное содержимое файла .env:
```sh
DEVMAN_AUTH_TOKEN=Token b155e4391bc8ef007f8d16b422a395ebdb051b00
TG_BOT_TOKEN=6085179991:AAFgklxJulEVQqg6RN1BzFEKvoHOp8WE6qM
TG_CHAT_ID=463123117
```
**Переменные окруженя**:  
DEVMAN_AUTH_TOKEN - токен для работы с сервером devman, необходимо получить [здесь](https://dvmn.org/api/docs/).  
TG_BOT_TOKEN - токен, который вы получили от  [BotFather](https://t.me/BotFather).  
TG_CHAT_ID - Чтобы получить свой chat_id, напишите в Telegram специальному боту: [@userinfobot](https://telegram.me/userinfobot).
